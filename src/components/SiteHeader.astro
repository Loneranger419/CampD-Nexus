---
import ThemeToggle from './ThemeToggle.astro';
import SearchWidget from './SearchWidget.astro';
import { withBase } from '../utils/paths';

type NavItem = { href: string; label: string };

const defaultNav: NavItem[] = [
	{ href: '/wiki', label: 'Wiki' },
	{ href: '/games', label: 'Games' },
	{ href: '/blog', label: 'Blog' },
	{ href: '/repos', label: 'Repositories' },
];

const { navItems = defaultNav } = Astro.props as { navItems?: NavItem[] };
const formattedNav = navItems.map((item: NavItem) => ({ ...item, href: withBase(item.href) }));
const homeHref = withBase('/');
const manageHref = withBase('/admin');
---

<header class="glass fixed inset-x-0 top-0 z-40 border-b border-border/50 bg-surface/70 backdrop-blur-[var(--header-blur)]">
	<div class="mx-auto flex max-w-7xl items-center justify-between gap-3 px-4 py-3 sm:px-6 lg:px-8">
		<a class="flex items-center gap-2 text-lg font-semibold tracking-tight text-foreground" href={homeHref}>
			<span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-accent/20 text-accent">
				<svg viewBox="0 0 24 24" class="h-5 w-5" aria-hidden="true">
					<path
						fill="currentColor"
						d="M11.12 3.21a1.5 1.5 0 0 1 1.76 0l6.5 4.75a1.5 1.5 0 0 1 .6 1.21v8.58a1.5 1.5 0 0 1-1.5 1.5H5.5a1.5 1.5 0 0 1-1.5-1.5V9.17a1.5 1.5 0 0 1 .6-1.21l6.52-4.75Z"
					/>
				</svg>
			</span>
			<span>CampD Nexus</span>
		</a>
		<nav class="hidden items-center gap-6 text-sm font-medium text-muted md:flex">
			{formattedNav.map((item) => (
				<a class="hover:text-foreground transition-colors duration-150" href={item.href}>
					{item.label}
				</a>
			))}
		</nav>
		<div class="flex items-center gap-2">
			<SearchWidget />
			<a class="btn-secondary hidden md:inline-flex" href={manageHref}>Manage</a>
			<ThemeToggle />
		</div>
	</div>
</header>

